<head>
    <meta charset="utf-8">
    <title>
        Cadastro de Médicos
    </title>     
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
    
<body>

    <h1>Cadastro de Médicos</h1>
    <br>

    CRM:
    <br>
    <input type="text" id="crm">
    <br><br>

    Nome:
    <br>
    <input type="text" id="nome">
    <br><br>

    Especialidade:
    <br>
    <input type="text" id="especialidade">
    <br><br>
    
    <button onclick="inserir()">Salvar</button>

    <a href="2medicos.html">
        <button>Voltar</button>
    </a>        

</body>
</html>

<script language="javascript">
    function inserir(){
        var crm = document.getElementById("crm").value
        var nome = document.getElementById("nome").value
        var especialidade = document.getElementById("especialidade").value

        var json = {
            'crm': crm,
            'nome': nome,
            'especialidade': especialidade
        }

        fetch('http://127.0.0.1:5000/medico/add',
        {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
            method: "POST",
            body: JSON.stringify(json)
        })
        .then(function(res){ 
            res.json()
                .then(data => {
                    console.log(data)
                    window.open("2medicos.html");
                })
        })
        .catch(function(res){ console.log(res) })
    }
</script>