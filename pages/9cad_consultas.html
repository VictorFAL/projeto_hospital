<head>
    <meta charset="utf-8">
    <title>
        Cadastro de Consultas
    </title>     
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
    
<body>

    <h1>Cadastro de Consultas</h1>
    <br>

    ID:
    <br>
    <input type="text" id="id">
    <br><br>

    ID Paciente:
    <br>
    <input type="text" id="id_paciente">
    <br><br>

    ID Médico:
    <br>
    <input type="text" id="id_medico">
    <br><br>
    
    Diagnóstico:
    <br>
    <input type="text" id="diagnostico">
    <br><br>

    Data de retorno:
    <br>
    <input type="text" id="retorno">
    <br><br>


    <button onclick="inserir()">Salvar</button>

    <a href="9consultas.html">
        <button>Voltar</button>
    </a>        

</body>
</html>

<script language="javascript">
    function inserir(){
        var id = document.getElementById("id").value
        var id_paciente = document.getElementById("id_paciente").value
        var id_medico = document.getElementById("id_medico").value
        var diagnostico = document.getElementById("diagnostico").value
        var retorno = document.getElementById("retorno").value

        var json = {
            'id': id,
            'id_paciente': id_paciente,
            'id_medico': id_medico,
            'diagnostico': diagnostico,
            'retorno': retorno
        }

        fetch('http://127.0.0.1:5000/consulta/add',
        {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
            method: "POST",
            body: JSON.stringify(json)
        })
        .then(function(res){ 
            res.json()
                .then(data => {
                    console.log(data)
                    window.open("9consultas.html");
                })
        })
        .catch(function(res){ console.log(res) })
    }
</script>