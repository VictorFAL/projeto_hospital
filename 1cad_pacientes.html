<head>
    <title>
        Cadastro de Pacientes
    </title>     
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
    
<body>

    <h1>Cadastro de Pacientes</h1>
    <br>

    CPF:
    <br>
    <input type="text" id="cpf">
    <br><br>

    Nome:
    <br>
    <input type="text" id="nome">
    <br><br>

    Idade:
    <br>
    <input type="text" id="idade">
    <br><br>

    Bairro:
    <br>
    <input type="text" id="bairro">
    <br><br>

    Comorbidade:
    <br>
    <input type="text" id="comorbidade">
    <br><br>



    <button onclick="inserir()">Salvar</button>

    <a href="1paciente.html">
        <button>Voltar</button>
    </a>        

</body>
</html>

<script language="javascript">
    function inserir(){
        var cpf = document.getElementById("cpf").value
        var nome = document.getElementById("nome").value
        var idade = document.getElementById("idade").value
        var bairro = document.getElementById("bairro").value
        var comorbidade = document.getElementById("comorbidade").value

        var json = {
            'cpf': cpf,
            'nome': nome,
            'idade': idade,
            'bairro': bairro,
            'comorbidade': comorbidade
        }

        fetch('http://127.0.0.1:5000/paciente/add',
        {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
            method: "POST",
            body: JSON.stringify(json)
        })
        .then(function(res){ 
            res.json()
                .then(data => {
                    console.log(data)
                    window.open("1paciente.html");
                })
        })
        .catch(function(res){ console.log(res) })
    }
</script>