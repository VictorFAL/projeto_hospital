<head>
    <meta charset="utf-8">
    <title>
        Cadastro de Técnicos
    </title>     
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
    
<body>

    <h1>Cadastro de Técnicos</h1>
    <br>

    ID:
    <br>
    <input type="text" id="id">
    <br><br>

    Nome:
    <br>
    <input type="text" id="nome">
    <br><br>

    Setor:
    <br>
    <input type="text" id="setor">
    <br><br>
    
    <button onclick="inserir()">Salvar</button>

    <a href="5tecnicos.html">
        <button>Voltar</button>
    </a>        

</body>
</html>

<script language="javascript">
    function inserir(){
        var id = document.getElementById("id").value
        var nome = document.getElementById("nome").value
        var tipo = document.getElementById("setor").value

        var json = {
            'id': id,
            'nome': nome,
            'setor': setor
        }

        fetch('http://127.0.0.1:5000/tecnico/add',
        {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
            method: "POST",
            body: JSON.stringify(json)
        })
        .then(function(res){ 
            res.json()
                .then(data => {
                    console.log(data)
                    window.open("5tecnicos.html");
                })
        })
        .catch(function(res){ console.log(res) })
    }
</script>